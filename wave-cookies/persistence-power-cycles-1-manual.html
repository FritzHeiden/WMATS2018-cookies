<!doctype html>
<html>
<head>
  <meta charset=utf-8>
  <title>Persistence of cookies across power cycles of the device</title>
  <meta name=help href="https://tools.ietf.org/html/rfc6265#page-8">
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
  <script src="resources/cookies-helper.js"></script>
</head>
<body style="background:#EEE">
  <h3>Manual Test: Testing Cookies (2/4)</h3>
  <p>
    Devices MUST support persistence of cookies across power cycles of the
    device
  </p>
  <h1>Please restart the device!</h1>
  <p>Resume session with token: <b id="token_text"></b></p>
  <p>Test will timeout after <span id="timeout"></span></p>
  <script>
    setup({ explicit_timeout: true });

    function millisToTimeString(totalMilliseconds) {
      let milliseconds = (totalMilliseconds % 1000) + "";
      milliseconds = milliseconds.padStart(3, "0");
      let seconds = (Math.floor(totalMilliseconds / 1000) % 60) + "";
      seconds = seconds.padStart(2, "0");
      let minutes = (Math.floor(totalMilliseconds / 60000) % 60) + "";
      minutes = minutes.padStart(2, "0");
      let hours = Math.floor(totalMilliseconds / 3600000) + "";
      hours = hours.padStart(2, "0");
      return `${hours}:${minutes}:${seconds}`;
    }

    (function() {
    document.getElementById("token_text").innerHTML = __WAVE__TOKEN;
      document.getElementById("timeout").innerHTML = millisToTimeString(
        __WAVE__TIMEOUT
      );
    })();

    const TEST_CASE = {file: "persistence_power_cycles", value: "persistence_power_cycles_test"};
    setCookie(TEST_CASE.file, TEST_CASE.value, 1);
    setTimeout(function(){
      setCookie(TEST_CASE.file, "", 1);
      console.log("Deleted ");
    }, 55000);

  </script>
</body>
</html>